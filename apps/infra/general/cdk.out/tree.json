{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.230.0"},"children":{"CrawlerStack-dev":{"id":"CrawlerStack-dev","path":"CrawlerStack-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.230.0"},"children":{"CrawlerFunction":{"id":"CrawlerFunction","path":"CrawlerStack-dev/CrawlerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CrawlerStack-dev/CrawlerFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CrawlerStack-dev/CrawlerFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"CrawlerStack-dev/CrawlerFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CrawlerStack-dev/CrawlerFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CrawlerStack-dev/CrawlerFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CrawlerFunctionServiceRoleDefaultPolicyB8AD36D9","roles":[{"Ref":"CrawlerFunctionServiceRoleD519478C"}]}}}}}}},"AssetImage":{"id":"AssetImage","path":"CrawlerStack-dev/CrawlerFunction/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.230.0"},"children":{"Staging":{"id":"Staging","path":"CrawlerStack-dev/CrawlerFunction/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"Repository":{"id":"Repository","path":"CrawlerStack-dev/CrawlerFunction/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CrawlerStack-dev/CrawlerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["x86_64"],"code":{"imageUri":{"Fn::Sub":"503411876186.dkr.ecr.ca-central-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-503411876186-ca-central-1:cf679358a8fa80e2847b740ac5182877de58dc88d085d0c9b793caef94c8ea7b"}},"description":"Web crawler and data extractor using Puppeteer","environment":{"variables":{"NODE_ENV":"dev"}},"functionName":"crawler-dataextractor-dev","memorySize":2048,"packageType":"Image","role":{"Fn::GetAtt":["CrawlerFunctionServiceRoleD519478C","Arn"]},"timeout":300}}},"LogRetention":{"id":"LogRetention","path":"CrawlerStack-dev/CrawlerFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.230.0"},"children":{"Resource":{"id":"Resource","path":"CrawlerStack-dev/CrawlerFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"LogGroup":{"id":"LogGroup","path":"CrawlerStack-dev/CrawlerFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"CrawlerStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Code":{"id":"Code","path":"CrawlerStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"CrawlerStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"CrawlerStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"CrawlerStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CrawlerStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"CrawlerStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CrawlerStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CrawlerStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:PutRetentionPolicy","logs:DeleteRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"CrawlerStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"CrawlerTriggerRule":{"id":"CrawlerTriggerRule","path":"CrawlerStack-dev/CrawlerTriggerRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CrawlerStack-dev/CrawlerTriggerRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Triggers the crawler Lambda function","eventPattern":{"source":["custom.crawler"],"detail-type":["CrawlRequest"]},"name":"crawler-trigger-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["CrawlerFunction614391C2","Arn"]},"retryPolicy":{"maximumRetryAttempts":2}}]}}},"AllowEventRuleCrawlerStackdevCrawlerFunctionD022F367":{"id":"AllowEventRuleCrawlerStackdevCrawlerFunctionD022F367","path":"CrawlerStack-dev/CrawlerTriggerRule/AllowEventRuleCrawlerStackdevCrawlerFunctionD022F367","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CrawlerFunction614391C2","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["CrawlerTriggerRule0B25D901","Arn"]}}}}}},"CrawlerFunctionName":{"id":"CrawlerFunctionName","path":"CrawlerStack-dev/CrawlerFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"CrawlerFunctionArn":{"id":"CrawlerFunctionArn","path":"CrawlerStack-dev/CrawlerFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"EventBridgeRuleName":{"id":"EventBridgeRuleName","path":"CrawlerStack-dev/EventBridgeRuleName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"CrawlerStack-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"CrawlerStack-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CrawlerStack-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.230.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CrawlerStack-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.230.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}